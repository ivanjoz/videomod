import{b as d,q as c,h as m,t as r,m as T,S as w,F as E,B as M}from"./web-C66VvyLr.js";/* empty css                     */var k=r("<div>!"),F=r("<h4>Local Descripcion"),f=r("<div>"),I=r("<h4>Paste Remote Offer"),_=r("<textarea class=ttx rows=5>"),q=r("<button>Accept Remote Offer"),B=r("<h4>Created Answer"),H=r("<h4>Paste Remote Answer"),W=r("<button>Accept Remote Answer"),j=r("<h4>Message"),z=r("<textarea class=ttx rows=2>"),G=r("<button>Send Message"),K=r("<h4>Recived Messages"),Q=r("<div><h3>WebRTC Demo!</h3><div>Conecction State: <!> / ICE Conecction State: ");function X(){const[y,S]=d(""),[D,C]=d("----------"),[u,O]=d("Pending"),[A,R]=d("Pending"),[$,P]=d([]);let g="",p="",s;if(typeof window>"u")return k();let i;const t=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});t.onconnectionstatechange=n=>{console.log("connectionstatechange",n),O(t.connectionState)},t.oniceconnectionstatechange=n=>{console.log("oniceconnectionstatechange",n),R(t.iceConnectionState)};const h=n=>{P([...$(),n.data])};t.ondatachannel=n=>{console.log("ondatachannel"),i=n.channel,i.onmessage=h},t.onnegotiationneeded=async n=>{console.log("onnegotiationneeded",n)};async function x(){i=t.createDataChannel("data"),i.onopen=a=>console.log("onopen",a),i.onmessage=h,t.onicecandidate=a=>{console.log("localDescription Offer 1::",JSON.stringify(t.localDescription)),t.localDescription.type=="offer"&&S(JSON.stringify(t.localDescription)),a.candidate||console.log("localDescription Offer 2::",JSON.stringify(t.localDescription))};const n=await t.createOffer();await t.setLocalDescription(n)}x();const b=async()=>{if(g)try{const n=JSON.parse(g);await t.setRemoteDescription(n),t.onicecandidate=l=>{t.localDescription.type=="answer"&&C(JSON.stringify(t.localDescription)),console.log("localDescription Answer 1::",t.localDescription),l.candidate||console.log("localDescription Answer 2::",JSON.stringify(t.localDescription))};const a=await t.createAnswer();await t.setLocalDescription(a)}catch(n){console.error(n),console.error("Remote Offer no pudo ser parseada",g)}},J=async()=>{if(p)try{await t.setRemoteDescription(JSON.parse(p))}catch(n){console.error(n),console.error("Remote Answer no pudo ser parseada",p)}};return(()=>{var n=Q(),a=n.firstChild,l=a.nextSibling,L=l.firstChild,v=L.nextSibling;return v.nextSibling,l.style.setProperty("display","flex"),c(l,u,v),c(l,A,null),c(n,m(w,{get when(){return u()!=="connected"},get children(){return[F(),(()=>{var e=f();return c(e,y),e})(),(()=>{var e=f();return e.style.setProperty("margin-bottom","1rem"),e})(),I(),(()=>{var e=_();return e.addEventListener("change",o=>{g=o.currentTarget.value}),e.style.setProperty("width","100%"),e})(),(()=>{var e=q();return e.$$click=o=>{o.stopPropagation(),b()},e})(),B(),(()=>{var e=f();return c(e,D),e})(),H(),(()=>{var e=_();return e.addEventListener("change",o=>{p=o.currentTarget.value}),e.style.setProperty("width","100%"),e})(),(()=>{var e=W();return e.$$click=o=>{o.stopPropagation(),J()},e})()]}}),null),c(n,m(w,{get when(){return u()==="connected"},get children(){return[j(),(()=>{var e=z();e.addEventListener("change",N=>{p=N.currentTarget.value});var o=s;return typeof o=="function"?M(o,e):s=e,e.style.setProperty("width","100%"),e})(),(()=>{var e=G();return e.$$click=o=>{o.stopPropagation(),s&&s.value&&(i.send(s.value),s.value="")},e})(),K(),m(E,{get each(){return $()},children:e=>(()=>{var o=f();return c(o,e),o})()})]}}),null),n})()}T(["click"]);export{X as default};
