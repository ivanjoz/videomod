import{b as $,B as C,q as a,h as d,t as n,m as b,S as g,F as x,D as O}from"./web-Y7BQqY1U.js";import"./_commonjsHelpers-CP86g_7B.js";import{w as o,a as m,i as P,r as M,c as E,C as L}from"./connection-C1xrgYFm.js";var T=n("<div>!"),k=n("<h4>Local Descripcion"),p=n("<div>"),J=n("<h4>Paste Remote Offer"),v=n("<textarea class=ttx rows=5>"),N=n("<button>Accept Remote Offer"),F=n("<h4>Created Answer"),I=n("<h4>Paste Remote Answer"),q=n("<button>Accept Remote Answer"),B=n("<h4>Message"),H=n("<textarea class=ttx rows=2>"),W=n("<button>Send Message"),j=n("<h4>Recived Messages"),z=n("<div><h3>WebRTC Demo!</h3><div>Conecction State: <!> / ICE Conecction State: ");function U(){const[w,_]=$(""),[h,y]=$("----------");let l="",c="",s;if(typeof window>"u")return T();o.getOffer().then(r=>{_(r)});const S=async()=>{if(c)try{await o.connection.setRemoteDescription(JSON.parse(c)),localStorage.setItem("savedRemoteAnswer",c)}catch(r){console.error(r),console.error("Remote Answer no pudo ser parseada",c)}},A=async()=>{if(l)try{const r=JSON.parse(l);await o.connection.setRemoteDescription(r),o.connection.onicecandidate=i=>{o.connection.localDescription.type=="answer"&&y(JSON.stringify(o.connection.localDescription)),console.log("localDescription Answer 1::",o.connection.localDescription),i.candidate||console.log("localDescription Answer 2::",JSON.stringify(o.connection.localDescription))};const u=await o.connection.createAnswer();await o.connection.setLocalDescription(u)}catch(r){console.error(r),console.error("Remote Offer no pudo ser parseada",l)}};return C(()=>{E.onMessage=r=>{console.log("respuesta recibida::",r)},L()},[]),(()=>{var r=z(),u=r.firstChild,i=u.nextSibling,D=i.firstChild,f=D.nextSibling;return f.nextSibling,i.style.setProperty("display","flex"),a(i,m,f),a(i,P,null),a(r,d(g,{get when(){return m()!=="connected"},get children(){return[k(),(()=>{var e=p();return a(e,w),e})(),(()=>{var e=p();return e.style.setProperty("margin-bottom","1rem"),e})(),J(),(()=>{var e=v();return e.addEventListener("change",t=>{l=t.currentTarget.value}),e.style.setProperty("width","100%"),e})(),(()=>{var e=N();return e.$$click=t=>{t.stopPropagation(),A()},e})(),F(),(()=>{var e=p();return a(e,h),e})(),I(),(()=>{var e=v();return e.addEventListener("change",t=>{c=t.currentTarget.value}),e.style.setProperty("width","100%"),e})(),(()=>{var e=q();return e.$$click=t=>{t.stopPropagation(),S()},e})()]}}),null),a(r,d(g,{get when(){return m()==="connected"},get children(){return[B(),(()=>{var e=H();e.addEventListener("change",R=>{c=R.currentTarget.value});var t=s;return typeof t=="function"?O(t,e):s=e,e.style.setProperty("width","100%"),e})(),(()=>{var e=W();return e.$$click=t=>{t.stopPropagation(),s&&s.value&&(o.channel.send(s.value),s.value="")},e})(),j(),d(x,{get each(){return M()},children:e=>(()=>{var t=p();return a(t,e),t})()})]}}),null),r})()}b(["click"]);export{U as default};
